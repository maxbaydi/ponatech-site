module.exports=[10167,46110,31961,41839,1572,42321,1693,a=>{"use strict";var b=a.i(57490),c=a.i(51413),d=a.i(33551),e=a.i(95681),f=a.i(89047);let g=(0,f.default)("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]);var h=a.i(62987),i=a.i(86636),j=a.i(37188),k=a.i(59190),l=a.i(97293),m=a.i(91645),n=a.i(90886),o=a.i(45954),p=a.i(56840),q=a.i(22475);function r(){let a=(0,d.useRouter)(),f=(0,d.useSearchParams)(),g=(0,c.useRef)(f);g.current=f;let{data:n,isLoading:r}=(0,o.useBrands)(),{data:s,isLoading:t}=(0,p.useCategories)(),u=f.get("brandId")?.split(",").filter(Boolean)||[],v=f.get("categoryId")?.split(",").filter(Boolean)||[],w=f.get("minPrice")||"",x=f.get("maxPrice")||"",[y,z]=(0,c.useState)(w),[A,B]=(0,c.useState)(x),C=(0,c.useRef)(!1),D=(0,c.useRef)(null);(0,c.useEffect)(()=>{let a=f.get("minPrice")||"",b=f.get("maxPrice")||"";C.current||(a!==y&&z(a),b!==A&&B(b))},[f,y,A]);let E=(0,c.useCallback)((b,c)=>{let d=new URLSearchParams(f.toString());Array.isArray(c)?c.length>0?d.set(b,c.join(",")):d.delete(b):c?d.set(b,c):d.delete(b),d.set("page","1"),a.push(`/catalog?${d.toString()}`,{scroll:!1})},[a,f]),F=(0,c.useCallback)((b,c)=>{D.current&&clearTimeout(D.current),D.current=setTimeout(()=>{let d=new URLSearchParams(g.current.toString());b?d.set("minPrice",b):d.delete("minPrice"),c?d.set("maxPrice",c):d.delete("maxPrice"),d.set("page","1"),a.push(`/catalog?${d.toString()}`,{scroll:!1}),C.current=!1},500)},[a]);(0,c.useEffect)(()=>{C.current&&F(y,A)},[y,A,F]),(0,c.useEffect)(()=>()=>{D.current&&clearTimeout(D.current)},[]);let G=u.length>0||v.length>0||y||A;return(0,b.jsxs)("div",{className:"space-y-6",children:[G&&(0,b.jsxs)(h.Button,{variant:"ghost",size:"sm",onClick:()=>{D.current&&clearTimeout(D.current),C.current=!1,z(""),B(""),a.push("/catalog",{scroll:!1})},className:"w-full justify-start text-destructive smooth-appear",children:[(0,b.jsx)(e.X,{className:"mr-2 h-4 w-4"}),"Сбросить фильтры"]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(j.Label,{className:"text-sm font-semibold mb-3 block",children:"Цена (₽)"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(i.Input,{type:"number",placeholder:"От",value:y,onChange:a=>{C.current=!0,z(a.target.value)},className:"h-9"}),(0,b.jsx)(i.Input,{type:"number",placeholder:"До",value:A,onChange:a=>{C.current=!0,B(a.target.value)},className:"h-9"})]})]}),(0,b.jsx)(l.Separator,{}),(0,b.jsxs)("div",{children:[(0,b.jsx)(j.Label,{className:"text-sm font-semibold mb-3 block",children:"Бренды"}),(0,b.jsx)(m.ScrollArea,{className:"h-48",children:r?(0,b.jsx)("div",{className:"space-y-2",children:Array.from({length:5}).map((a,c)=>(0,b.jsx)(q.Skeleton,{className:"h-6 w-full"},c))}):(0,b.jsx)("div",{className:"space-y-2 pr-4",children:n?.map(a=>(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(k.Checkbox,{id:`brand-${a.id}`,checked:u.includes(a.id),onCheckedChange:()=>{var b;return b=a.id,void E("brandId",u.includes(b)?u.filter(a=>a!==b):[...u,b])}}),(0,b.jsx)("label",{htmlFor:`brand-${a.id}`,className:"text-sm cursor-pointer flex-1 truncate",children:a.name})]},a.id))})})]}),(0,b.jsx)(l.Separator,{}),(0,b.jsxs)("div",{children:[(0,b.jsx)(j.Label,{className:"text-sm font-semibold mb-3 block",children:"Категории"}),(0,b.jsx)(m.ScrollArea,{className:"h-48",children:t?(0,b.jsx)("div",{className:"space-y-2",children:Array.from({length:5}).map((a,c)=>(0,b.jsx)(q.Skeleton,{className:"h-6 w-full"},c))}):(0,b.jsx)("div",{className:"space-y-2 pr-4",children:s?.map(a=>(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(k.Checkbox,{id:`category-${a.id}`,checked:v.includes(a.id),onCheckedChange:()=>{var b;return b=a.id,void E("categoryId",v.includes(b)?v.filter(a=>a!==b):[...v,b])}}),(0,b.jsx)("label",{htmlFor:`category-${a.id}`,className:"text-sm cursor-pointer flex-1 truncate",children:a.name})]},a.id))})})]})]})}function s({isMobile:a}){return a?(0,b.jsxs)(n.Sheet,{children:[(0,b.jsx)(n.SheetTrigger,{asChild:!0,children:(0,b.jsxs)(h.Button,{variant:"outline",size:"sm",className:"lg:hidden",children:[(0,b.jsx)(g,{className:"mr-2 h-4 w-4"}),"Фильтры"]})}),(0,b.jsxs)(n.SheetContent,{side:"left",className:"w-80",children:[(0,b.jsx)(n.SheetHeader,{children:(0,b.jsx)(n.SheetTitle,{children:"Фильтры"})}),(0,b.jsx)("div",{className:"mt-6",children:(0,b.jsx)(r,{})})]})]}):(0,b.jsx)("div",{className:"hidden lg:block w-64 flex-shrink-0",children:(0,b.jsxs)("div",{className:"sticky top-24 bg-background rounded-xl border border-border p-4",children:[(0,b.jsxs)("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[(0,b.jsx)(g,{className:"h-4 w-4"}),"Фильтры"]}),(0,b.jsx)(r,{})]})})}a.s(["ProductFilters",()=>s],46110);var t=a.i(78607),u=a.i(30076),v=a.i(98908),w=a.i(3846),x=a.i(38130);function y({src:a,alt:c="",className:d="",showPlaceholder:e=!0}){return(0,b.jsx)("div",{className:`relative w-full bg-white ${d}`,style:{aspectRatio:"16/9"},children:a?(0,b.jsx)("img",{src:a,alt:c,className:"absolute inset-0 m-auto max-w-full max-h-full object-contain"}):e?(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,b.jsx)(x.Package,{className:"w-16 h-16 text-muted-foreground/30"})}):null})}var z=a.i(99543);function A({product:a,viewMode:c="grid"}){let d=a.images?.find(a=>a.isMain)||a.images?.[0],e=(a=>{if(!a)return"";try{return(new DOMParser().parseFromString(a,"text/html").body.textContent||"").trim()}catch{return a.replace(/<[^>]*>/g,"").trim()}})(a.description);return"list"===c?(0,b.jsx)(v.Card,{className:"group overflow-hidden card-hover",children:(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row",children:[(0,b.jsxs)("div",{className:"relative w-full sm:w-64 flex-shrink-0",children:[(0,b.jsx)(y,{src:d?.url,alt:a.title}),a.brand&&(0,b.jsx)(w.Badge,{variant:"secondary",className:"absolute top-3 left-3 z-10",children:a.brand.name})]}),(0,b.jsxs)(v.CardContent,{className:"flex-1 p-4 flex flex-col justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"text-xs text-muted-foreground mb-1",children:["SKU: ",a.sku]}),(0,b.jsx)(t.default,{href:`/catalog/${a.slug}`,children:(0,b.jsx)("h3",{className:"font-medium text-base mb-2 group-hover:text-primary transition-colors line-clamp-2",children:a.title})}),e&&(0,b.jsx)("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-3",children:e}),a.category&&(0,b.jsx)(w.Badge,{variant:"outline",className:"text-xs",children:a.category.name})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,b.jsx)("p",{className:"font-bold text-xl text-primary",children:(0,z.formatPrice)(a.price,a.currency)}),(0,b.jsx)(h.Button,{asChild:!0,size:"sm",children:(0,b.jsxs)(t.default,{href:`/catalog/${a.slug}`,children:[(0,b.jsx)(u.Eye,{className:"mr-2 h-4 w-4"}),"Подробнее"]})})]})]})]})}):(0,b.jsx)(t.default,{href:`/catalog/${a.slug}`,children:(0,b.jsxs)(v.Card,{className:"group overflow-hidden card-hover h-full",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(y,{src:d?.url,alt:a.title}),a.brand&&(0,b.jsx)(w.Badge,{variant:"secondary",className:"absolute top-3 left-3 z-10",children:a.brand.name}),"number"==typeof a.stock&&0===a.stock&&(0,b.jsx)(w.Badge,{variant:"destructive",className:"absolute top-3 right-3 z-10",children:"Нет в наличии"})]}),(0,b.jsxs)(v.CardContent,{className:"p-4",children:[(0,b.jsxs)("p",{className:"text-xs text-muted-foreground mb-1",children:["SKU: ",a.sku]}),(0,b.jsx)("h3",{className:"font-medium text-sm mb-2 line-clamp-2 group-hover:text-primary transition-colors min-h-[2.5rem]",children:a.title}),a.category&&(0,b.jsx)(w.Badge,{variant:"outline",className:"text-xs mb-3",children:a.category.name}),(0,b.jsx)("p",{className:"font-bold text-lg text-primary",children:(0,z.formatPrice)(a.price,a.currency)})]})]})})}a.s(["ProductCard",()=>A],31961);var B=a.i(59280);let C=[{value:"created_desc",label:"Сначала новые"},{value:"created_asc",label:"Сначала старые"},{value:"price_asc",label:"Цена: по возрастанию"},{value:"price_desc",label:"Цена: по убыванию"},{value:"title_asc",label:"Название: А-Я"},{value:"title_desc",label:"Название: Я-А"}];function D(){let a=(0,d.useRouter)(),c=(0,d.useSearchParams)(),e=c.get("sort")||"created_desc";return(0,b.jsxs)(B.Select,{value:e,onValueChange:b=>{let d=new URLSearchParams(c.toString());d.set("sort",b),d.set("page","1"),a.push(`/catalog?${d.toString()}`,{scroll:!1})},children:[(0,b.jsx)(B.SelectTrigger,{className:"w-[200px]",children:(0,b.jsx)(B.SelectValue,{placeholder:"Сортировка"})}),(0,b.jsx)(B.SelectContent,{children:C.map(a=>(0,b.jsx)(B.SelectItem,{value:a.value,children:a.label},a.value))})]})}a.s(["ProductSort",()=>D],41839);var E=a.i(28187);function F(){let a=(0,d.useRouter)(),f=(0,d.useSearchParams)(),[g,j]=(0,c.useState)(f.get("search")||""),k=(0,c.useRef)(!1),l=(0,c.useRef)(f);l.current=f;let m=(0,c.useCallback)((0,z.debounce)(b=>{let c=new URLSearchParams(l.current.toString());b?c.set("search",b):c.delete("search"),c.set("page","1"),a.push(`/catalog?${c.toString()}`,{scroll:!1}),k.current=!1},500),[a]);return(0,c.useEffect)(()=>{k.current&&m(g)},[g,m]),(0,c.useEffect)(()=>{let a=f.get("search")||"";k.current||a===g||j(a)},[f]),(0,b.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,b.jsx)(E.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(i.Input,{placeholder:"Поиск по названию или SKU...",value:g,onChange:a=>{var b;return b=a.target.value,void(k.current=!0,j(b))},className:"pl-10 pr-10"}),g&&(0,b.jsx)(h.Button,{variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 -translate-y-1/2 h-7 w-7",onClick:()=>{k.current=!0,j("")},children:(0,b.jsx)(e.X,{className:"h-4 w-4"})})]})}a.s(["ProductSearch",()=>F],1572);var G=a.i(6318);function H({currentPage:a,totalPages:c}){let e=(0,d.useRouter)(),f=(0,d.useSearchParams)(),g=a=>{let b=new URLSearchParams(f.toString());return b.set("page",String(a)),`/catalog?${b.toString()}`},h=(a,b)=>{b.preventDefault(),e.push(g(a),{scroll:!1})};return c<=1?null:(0,b.jsx)(G.Pagination,{children:(0,b.jsxs)(G.PaginationContent,{children:[(0,b.jsx)(G.PaginationItem,{children:(0,b.jsx)(G.PaginationPrevious,{href:g(a-1),onClick:b=>h(a-1,b),className:a<=1?"pointer-events-none opacity-50":"cursor-pointer"})}),(()=>{let b=[];if(c<=7)for(let a=1;a<=c;a++)b.push(a);else{b.push(1);let d=Math.max(2,a-1),e=Math.min(c-1,a+1);a<=3?e=Math.min(5,c-1):a>=c-2&&(d=Math.max(2,c-5+1)),d>2&&b.push("ellipsis");for(let a=d;a<=e;a++)b.push(a);e<c-1&&b.push("ellipsis"),b.push(c)}return b})().map((c,d)=>"ellipsis"===c?(0,b.jsx)(G.PaginationItem,{children:(0,b.jsx)(G.PaginationEllipsis,{})},`ellipsis-${d}`):(0,b.jsx)(G.PaginationItem,{children:(0,b.jsx)(G.PaginationLink,{href:g(c),onClick:a=>h(c,a),isActive:c===a,className:"cursor-pointer",children:c})},c)),(0,b.jsx)(G.PaginationItem,{children:(0,b.jsx)(G.PaginationNext,{href:g(a+1),onClick:b=>h(a+1,b),className:a>=c?"pointer-events-none opacity-50":"cursor-pointer"})})]})})}a.s(["ProductPagination",()=>H],42321);let I=(0,f.default)("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);var J=a.i(32547);function K({view:a,onViewChange:c}){return(0,b.jsxs)("div",{className:"flex items-center border rounded-lg p-1",children:[(0,b.jsx)(h.Button,{variant:"ghost",size:"icon",className:(0,z.cn)("h-8 w-8","grid"===a&&"bg-muted"),onClick:()=>c("grid"),children:(0,b.jsx)(I,{className:"h-4 w-4"})}),(0,b.jsx)(h.Button,{variant:"ghost",size:"icon",className:(0,z.cn)("h-8 w-8","list"===a&&"bg-muted"),onClick:()=>c("list"),children:(0,b.jsx)(J.List,{className:"h-4 w-4"})})]})}a.s(["ViewToggle",()=>K],1693),a.s([],10167)}];

//# sourceMappingURL=front_components_catalog_index_ts_66b49944._.js.map