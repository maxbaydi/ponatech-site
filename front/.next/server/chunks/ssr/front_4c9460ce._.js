module.exports=[22475,a=>{"use strict";var b=a.i(57490),c=a.i(99543);function d({className:a,...d}){return(0,b.jsx)("div",{className:(0,c.cn)("animate-pulse rounded-md bg-primary/10",a),...d})}a.s(["Skeleton",()=>d])},45954,a=>{"use strict";var b=a.i(67234),c=a.i(3391),d=a.i(83796),e=a.i(70855);function f(){return(0,b.useQuery)({queryKey:["brands"],queryFn:()=>e.apiClient.getBrands()})}function g(a){return(0,b.useQuery)({queryKey:["brand",a],queryFn:()=>e.apiClient.getBrand(a),enabled:!!a})}function h(){let a=(0,d.useQueryClient)();return(0,c.useMutation)({mutationFn:a=>e.apiClient.createBrand(a),onSuccess:()=>{a.invalidateQueries({queryKey:["brands"]})}})}function i(){let a=(0,d.useQueryClient)();return(0,c.useMutation)({mutationFn:({id:a,data:b})=>e.apiClient.updateBrand(a,b),onSuccess:(b,{id:c})=>{a.invalidateQueries({queryKey:["brands"]}),a.invalidateQueries({queryKey:["brand",c]})}})}function j(){let a=(0,d.useQueryClient)();return(0,c.useMutation)({mutationFn:a=>e.apiClient.deleteBrand(a),onSuccess:()=>{a.invalidateQueries({queryKey:["brands"]})}})}a.s(["useBrand",()=>g,"useBrands",()=>f,"useCreateBrand",()=>h,"useDeleteBrand",()=>j,"useUpdateBrand",()=>i])},59190,a=>{"use strict";var b=a.i(57490),c=a.i(51413),d=a.i(59024),e=a.i(10578),f=a.i(12703),g=a.i(78214),h=a.i(54254),i=a.i(78756),j=a.i(29971),k=a.i(86814),l="Checkbox",[m,n]=(0,e.createContextScope)(l),[o,p]=m(l);function q(a){let{__scopeCheckbox:d,checked:e,children:f,defaultChecked:h,disabled:i,form:j,name:k,onCheckedChange:m,required:n,value:p="on",internal_do_not_use_render:q}=a,[r,s]=(0,g.useControllableState)({prop:e,defaultProp:h??!1,onChange:m,caller:l}),[t,u]=c.useState(null),[v,w]=c.useState(null),x=c.useRef(!1),z=!t||!!j||!!t.closest("form"),A={checked:r,disabled:i,setChecked:s,control:t,setControl:u,name:k,form:j,value:p,hasConsumerStoppedPropagationRef:x,required:n,defaultChecked:!y(h)&&h,isFormControl:z,bubbleInput:v,setBubbleInput:w};return(0,b.jsx)(o,{scope:d,...A,children:"function"==typeof q?q(A):f})}var r="CheckboxTrigger",s=c.forwardRef(({__scopeCheckbox:a,onKeyDown:e,onClick:g,...h},i)=>{let{control:j,value:l,disabled:m,checked:n,required:o,setControl:q,setChecked:s,hasConsumerStoppedPropagationRef:t,isFormControl:u,bubbleInput:v}=p(r,a),w=(0,d.useComposedRefs)(i,q),x=c.useRef(n);return c.useEffect(()=>{let a=j?.form;if(a){let b=()=>s(x.current);return a.addEventListener("reset",b),()=>a.removeEventListener("reset",b)}},[j,s]),(0,b.jsx)(k.Primitive.button,{type:"button",role:"checkbox","aria-checked":y(n)?"mixed":n,"aria-required":o,"data-state":z(n),"data-disabled":m?"":void 0,disabled:m,value:l,...h,ref:w,onKeyDown:(0,f.composeEventHandlers)(e,a=>{"Enter"===a.key&&a.preventDefault()}),onClick:(0,f.composeEventHandlers)(g,a=>{s(a=>!!y(a)||!a),v&&u&&(t.current=a.isPropagationStopped(),t.current||a.stopPropagation())})})});s.displayName=r;var t=c.forwardRef((a,c)=>{let{__scopeCheckbox:d,name:e,checked:f,defaultChecked:g,required:h,disabled:i,value:j,onCheckedChange:k,form:l,...m}=a;return(0,b.jsx)(q,{__scopeCheckbox:d,checked:f,defaultChecked:g,disabled:i,required:h,onCheckedChange:k,name:e,form:l,value:j,internal_do_not_use_render:({isFormControl:a})=>(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(s,{...m,ref:c,__scopeCheckbox:d}),a&&(0,b.jsx)(x,{__scopeCheckbox:d})]})})});t.displayName=l;var u="CheckboxIndicator",v=c.forwardRef((a,c)=>{let{__scopeCheckbox:d,forceMount:e,...f}=a,g=p(u,d);return(0,b.jsx)(j.Presence,{present:e||y(g.checked)||!0===g.checked,children:(0,b.jsx)(k.Primitive.span,{"data-state":z(g.checked),"data-disabled":g.disabled?"":void 0,...f,ref:c,style:{pointerEvents:"none",...a.style}})})});v.displayName=u;var w="CheckboxBubbleInput",x=c.forwardRef(({__scopeCheckbox:a,...e},f)=>{let{control:g,hasConsumerStoppedPropagationRef:j,checked:l,defaultChecked:m,required:n,disabled:o,name:q,value:r,form:s,bubbleInput:t,setBubbleInput:u}=p(w,a),v=(0,d.useComposedRefs)(f,u),x=(0,h.usePrevious)(l),z=(0,i.useSize)(g);c.useEffect(()=>{if(!t)return;let a=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,b=!j.current;if(x!==l&&a){let c=new Event("click",{bubbles:b});t.indeterminate=y(l),a.call(t,!y(l)&&l),t.dispatchEvent(c)}},[t,x,l,j]);let A=c.useRef(!y(l)&&l);return(0,b.jsx)(k.Primitive.input,{type:"checkbox","aria-hidden":!0,defaultChecked:m??A.current,required:n,disabled:o,name:q,value:r,form:s,...e,tabIndex:-1,ref:v,style:{...e.style,...z,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function y(a){return"indeterminate"===a}function z(a){return y(a)?"indeterminate":a?"checked":"unchecked"}x.displayName=w;var A=a.i(87861),B=a.i(99543);let C=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(t,{ref:d,className:(0,B.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow transition-colors duration-200 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-white",a),...c,children:(0,b.jsx)(v,{className:(0,B.cn)("flex items-center justify-center text-current"),children:(0,b.jsx)(A.Check,{className:"h-4 w-4"})})}));C.displayName=t.displayName,a.s(["Checkbox",()=>C],59190)},31862,a=>{"use strict";let b=(0,a.i(89047).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],31862)},13497,a=>{"use strict";var b=a.i(57490),c=a.i(51413),d=a.i(99543);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("textarea",{className:(0,d.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",a),ref:e,...c}));e.displayName="Textarea",a.s(["Textarea",()=>e])},54254,a=>{"use strict";var b=a.i(51413);function c(a){let c=b.useRef({value:a,previous:a});return b.useMemo(()=>(c.current.value!==a&&(c.current.previous=c.current.value,c.current.value=a),c.current.previous),[a])}a.s(["usePrevious",()=>c])},86636,a=>{"use strict";var b=a.i(57490),c=a.i(51413),d=a.i(99543);let e=c.forwardRef(({className:a,type:c,...e},f)=>(0,b.jsx)("input",{type:c,className:(0,d.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",a),ref:f,...e}));e.displayName="Input",a.s(["Input",()=>e])},78756,87861,a=>{"use strict";var b=a.i(51413),c=a.i(11899);function d(a){let[d,e]=b.useState(void 0);return(0,c.useLayoutEffect)(()=>{if(a){e({width:a.offsetWidth,height:a.offsetHeight});let b=new ResizeObserver(b=>{let c,d;if(!Array.isArray(b)||!b.length)return;let f=b[0];if("borderBoxSize"in f){let a=f.borderBoxSize,b=Array.isArray(a)?a[0]:a;c=b.inlineSize,d=b.blockSize}else c=a.offsetWidth,d=a.offsetHeight;e({width:c,height:d})});return b.observe(a,{box:"border-box"}),()=>b.unobserve(a)}e(void 0)},[a]),d}a.s(["useSize",()=>d],78756);let e=(0,a.i(89047).default)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);a.s(["Check",()=>e],87861)},98908,a=>{"use strict";var b=a.i(57490),c=a.i(51413),d=a.i(99543);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("rounded-xl border border-border bg-card text-card-foreground shadow-sm",a),...c}));e.displayName="Card";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",a),...c}));f.displayName="CardHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("h3",{ref:e,className:(0,d.cn)("font-semibold leading-none tracking-tight",a),...c}));g.displayName="CardTitle";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("p",{ref:e,className:(0,d.cn)("text-sm text-muted-foreground",a),...c}));h.displayName="CardDescription";let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("p-6 pt-0",a),...c}));i.displayName="CardContent",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex items-center p-6 pt-0",a),...c})).displayName="CardFooter",a.s(["Card",()=>e,"CardContent",()=>i,"CardDescription",()=>h,"CardHeader",()=>f,"CardTitle",()=>g])},37188,a=>{"use strict";var b=a.i(57490),c=a.i(51413);a.i(23427);var d=a.i(92021),e=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,e)=>{let f=(0,d.createSlot)(`Primitive.${e}`),g=c.forwardRef((a,c)=>{let{asChild:d,...g}=a;return(0,b.jsx)(d?f:e,{...g,ref:c})});return g.displayName=`Primitive.${e}`,{...a,[e]:g}},{}),f=c.forwardRef((a,c)=>(0,b.jsx)(e.label,{...a,ref:c,onMouseDown:b=>{b.target.closest("button, input, select, textarea")||(a.onMouseDown?.(b),!b.defaultPrevented&&b.detail>1&&b.preventDefault())}}));f.displayName="Label";var g=a.i(99252),h=a.i(99543);let i=(0,g.cva)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),j=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(f,{ref:d,className:(0,h.cn)(i(),a),...c}));j.displayName=f.displayName,a.s(["Label",()=>j],37188)},18276,a=>{"use strict";let b=(0,a.i(89047).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["ArrowLeft",()=>b],18276)},41980,a=>{"use strict";var b=a.i(57490),c=a.i(33551),d=a.i(8824),e=a.i(5841),f=a.i(65986),g=a.i(51413),h=a.i(18276),i=a.i(31862),j=a.i(78607),k=a.i(62987),l=a.i(86636),m=a.i(13497),n=a.i(59190),o=a.i(98908),p=a.i(75134),q=a.i(22475),r=a.i(45954);let s=f.z.object({name:f.z.string().min(2,"Введите название бренда"),slug:f.z.string().min(2,"Введите slug"),description:f.z.string().optional(),logoUrl:f.z.string().url("Введите корректный URL").optional().or(f.z.literal("")),country:f.z.string().optional(),isFeatured:f.z.boolean().default(!1)});function t(){let a=(0,c.useParams)().id,f=(0,c.useRouter)(),{data:t,isLoading:u,error:v}=(0,r.useBrand)(a),w=(0,r.useUpdateBrand)(),x=(0,g.useRef)(!1),y=(0,g.useRef)(null),z=(0,d.useForm)({resolver:(0,e.zodResolver)(s),defaultValues:{name:"",slug:"",description:"",logoUrl:"",country:"",isFeatured:!1}});(0,g.useEffect)(()=>{y.current!==a&&(y.current=a,x.current=!1)},[a]),(0,g.useEffect)(()=>{t&&!x.current&&(x.current=!0,z.reset({name:t.name,slug:t.slug,description:t.description||"",logoUrl:t.logoUrl||"",country:t.country||"",isFeatured:t.isFeatured}))},[t,z]);let A=async b=>{try{await w.mutateAsync({id:a,data:{...b,logoUrl:b.logoUrl||void 0,description:b.description||void 0,country:b.country||void 0}}),f.push("/admin/manage-brands")}catch{alert("Ошибка при обновлении бренда")}};return u?(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)(q.Skeleton,{className:"h-10 w-32 mb-4"}),(0,b.jsx)(q.Skeleton,{className:"h-8 w-48"}),(0,b.jsx)(q.Skeleton,{className:"h-4 w-64 mt-2"})]}),(0,b.jsxs)(o.Card,{children:[(0,b.jsx)(o.CardHeader,{children:(0,b.jsx)(q.Skeleton,{className:"h-6 w-40"})}),(0,b.jsxs)(o.CardContent,{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsx)(q.Skeleton,{className:"h-10 w-full"}),(0,b.jsx)(q.Skeleton,{className:"h-10 w-full"})]}),(0,b.jsx)(q.Skeleton,{className:"h-24 w-full"})]})]})]}):v||!t?(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"mb-6",children:(0,b.jsx)(k.Button,{variant:"ghost",asChild:!0,className:"mb-4",children:(0,b.jsxs)(j.default,{href:"/admin/manage-brands",children:[(0,b.jsx)(h.ArrowLeft,{className:"mr-2 h-4 w-4"}),"Назад к списку"]})})}),(0,b.jsx)(o.Card,{children:(0,b.jsx)(o.CardContent,{className:"p-8 text-center",children:(0,b.jsx)("p",{className:"text-destructive",children:"Бренд не найден"})})})]}):(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)(k.Button,{variant:"ghost",asChild:!0,className:"mb-4",children:(0,b.jsxs)(j.default,{href:"/admin/manage-brands",children:[(0,b.jsx)(h.ArrowLeft,{className:"mr-2 h-4 w-4"}),"Назад к списку"]})}),(0,b.jsx)("h1",{className:"text-2xl font-bold",children:"Редактирование бренда"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Изменение данных производителя"})]}),(0,b.jsxs)(o.Card,{children:[(0,b.jsx)(o.CardHeader,{children:(0,b.jsx)(o.CardTitle,{children:"Информация о бренде"})}),(0,b.jsx)(o.CardContent,{children:(0,b.jsx)(p.Form,{...z,children:(0,b.jsxs)("form",{onSubmit:z.handleSubmit(A),className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsx)(p.FormField,{control:z.control,name:"name",render:({field:a})=>(0,b.jsxs)(p.FormItem,{children:[(0,b.jsx)(p.FormLabel,{children:"Название *"}),(0,b.jsx)(p.FormControl,{children:(0,b.jsx)(l.Input,{placeholder:"Название бренда",...a})}),(0,b.jsx)(p.FormMessage,{})]})}),(0,b.jsx)(p.FormField,{control:z.control,name:"slug",render:({field:a})=>(0,b.jsxs)(p.FormItem,{children:[(0,b.jsx)(p.FormLabel,{children:"Slug *"}),(0,b.jsx)(p.FormControl,{children:(0,b.jsx)(l.Input,{placeholder:"brand-slug",...a})}),(0,b.jsx)(p.FormMessage,{})]})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsx)(p.FormField,{control:z.control,name:"country",render:({field:a})=>(0,b.jsxs)(p.FormItem,{children:[(0,b.jsx)(p.FormLabel,{children:"Страна"}),(0,b.jsx)(p.FormControl,{children:(0,b.jsx)(l.Input,{placeholder:"Германия",...a})}),(0,b.jsx)(p.FormMessage,{})]})}),(0,b.jsx)(p.FormField,{control:z.control,name:"logoUrl",render:({field:a})=>(0,b.jsxs)(p.FormItem,{children:[(0,b.jsx)(p.FormLabel,{children:"URL логотипа"}),(0,b.jsx)(p.FormControl,{children:(0,b.jsx)(l.Input,{placeholder:"https://...",...a})}),(0,b.jsx)(p.FormMessage,{})]})})]}),(0,b.jsx)(p.FormField,{control:z.control,name:"description",render:({field:a})=>(0,b.jsxs)(p.FormItem,{children:[(0,b.jsx)(p.FormLabel,{children:"Описание"}),(0,b.jsx)(p.FormControl,{children:(0,b.jsx)(m.Textarea,{placeholder:"Описание бренда...",className:"min-h-[100px]",...a})}),(0,b.jsx)(p.FormMessage,{})]})}),(0,b.jsx)(p.FormField,{control:z.control,name:"isFeatured",render:({field:a})=>(0,b.jsxs)(p.FormItem,{className:"flex items-start space-x-3 space-y-0",children:[(0,b.jsx)(p.FormControl,{children:(0,b.jsx)(n.Checkbox,{checked:a.value,onCheckedChange:a.onChange})}),(0,b.jsxs)("div",{className:"space-y-1 leading-none",children:[(0,b.jsx)(p.FormLabel,{children:"Избранный бренд"}),(0,b.jsx)(p.FormDescription,{children:"Избранные бренды отображаются на главной странице"})]})]})}),(0,b.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,b.jsx)(k.Button,{variant:"outline",type:"button",asChild:!0,children:(0,b.jsx)(j.default,{href:"/admin/manage-brands",children:"Отмена"})}),(0,b.jsxs)(k.Button,{type:"submit",disabled:w.isPending,children:[w.isPending&&(0,b.jsx)(i.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Сохранить изменения"]})]})]})})})]})]})}a.s(["default",()=>t])}];

//# sourceMappingURL=front_4c9460ce._.js.map