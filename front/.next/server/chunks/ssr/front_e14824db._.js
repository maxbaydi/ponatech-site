module.exports=[18276,a=>{"use strict";let b=(0,a.i(89047).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["ArrowLeft",()=>b],18276)},15859,a=>{"use strict";let b=(0,a.i(89047).default)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);a.s(["ChevronDown",()=>b],15859)},56840,a=>{"use strict";var b=a.i(67234),c=a.i(3391),d=a.i(83796),e=a.i(70855);function f(){return(0,b.useQuery)({queryKey:["categories"],queryFn:()=>e.apiClient.getCategories()})}function g(a){return(0,b.useQuery)({queryKey:["category",a],queryFn:()=>e.apiClient.getCategory(a),enabled:!!a})}function h(){let a=(0,d.useQueryClient)();return(0,c.useMutation)({mutationFn:a=>e.apiClient.createCategory(a),onSuccess:()=>{a.invalidateQueries({queryKey:["categories"]})}})}function i(){let a=(0,d.useQueryClient)();return(0,c.useMutation)({mutationFn:({id:a,data:b})=>e.apiClient.updateCategory(a,b),onSuccess:(b,{id:c})=>{a.invalidateQueries({queryKey:["categories"]}),a.invalidateQueries({queryKey:["category",c]})}})}function j(){let a=(0,d.useQueryClient)();return(0,c.useMutation)({mutationFn:a=>e.apiClient.deleteCategory(a),onSuccess:()=>{a.invalidateQueries({queryKey:["categories"]})}})}a.s(["useCategories",()=>f,"useCategory",()=>g,"useCreateCategory",()=>h,"useDeleteCategory",()=>j,"useUpdateCategory",()=>i])},13497,a=>{"use strict";var b=a.i(57490),c=a.i(51413),d=a.i(99543);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("textarea",{className:(0,d.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",a),ref:e,...c}));e.displayName="Textarea",a.s(["Textarea",()=>e])},37188,a=>{"use strict";var b=a.i(57490),c=a.i(51413);a.i(23427);var d=a.i(92021),e=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,e)=>{let f=(0,d.createSlot)(`Primitive.${e}`),g=c.forwardRef((a,c)=>{let{asChild:d,...g}=a;return(0,b.jsx)(d?f:e,{...g,ref:c})});return g.displayName=`Primitive.${e}`,{...a,[e]:g}},{}),f=c.forwardRef((a,c)=>(0,b.jsx)(e.label,{...a,ref:c,onMouseDown:b=>{b.target.closest("button, input, select, textarea")||(a.onMouseDown?.(b),!b.defaultPrevented&&b.detail>1&&b.preventDefault())}}));f.displayName="Label";var g=a.i(99252),h=a.i(99543);let i=(0,g.cva)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),j=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(f,{ref:d,className:(0,h.cn)(i(),a),...c}));j.displayName=f.displayName,a.s(["Label",()=>j],37188)},54254,a=>{"use strict";var b=a.i(51413);function c(a){let c=b.useRef({value:a,previous:a});return b.useMemo(()=>(c.current.value!==a&&(c.current.previous=c.current.value,c.current.value=a),c.current.previous),[a])}a.s(["usePrevious",()=>c])},31862,a=>{"use strict";let b=(0,a.i(89047).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],31862)},45954,a=>{"use strict";var b=a.i(67234),c=a.i(3391),d=a.i(83796),e=a.i(70855);function f(){return(0,b.useQuery)({queryKey:["brands"],queryFn:()=>e.apiClient.getBrands()})}function g(a){return(0,b.useQuery)({queryKey:["brand",a],queryFn:()=>e.apiClient.getBrand(a),enabled:!!a})}function h(){let a=(0,d.useQueryClient)();return(0,c.useMutation)({mutationFn:a=>e.apiClient.createBrand(a),onSuccess:()=>{a.invalidateQueries({queryKey:["brands"]})}})}function i(){let a=(0,d.useQueryClient)();return(0,c.useMutation)({mutationFn:({id:a,data:b})=>e.apiClient.updateBrand(a,b),onSuccess:(b,{id:c})=>{a.invalidateQueries({queryKey:["brands"]}),a.invalidateQueries({queryKey:["brand",c]})}})}function j(){let a=(0,d.useQueryClient)();return(0,c.useMutation)({mutationFn:a=>e.apiClient.deleteBrand(a),onSuccess:()=>{a.invalidateQueries({queryKey:["brands"]})}})}a.s(["useBrand",()=>g,"useBrands",()=>f,"useCreateBrand",()=>h,"useDeleteBrand",()=>j,"useUpdateBrand",()=>i])},41346,a=>{"use strict";var b=a.i(67234),c=a.i(3391),d=a.i(83796),e=a.i(70855);function f(a){return(0,b.useQuery)({queryKey:["products",a],queryFn:()=>e.apiClient.getProducts(a)})}function g(a){return(0,b.useQuery)({queryKey:["product",a],queryFn:()=>e.apiClient.getProduct(a),enabled:!!a})}function h(a){return(0,b.useQuery)({queryKey:["product","slug",a],queryFn:()=>e.apiClient.getProductBySlug(a),enabled:!!a})}function i(){let a=(0,d.useQueryClient)();return(0,c.useMutation)({mutationFn:a=>e.apiClient.createProduct(a),onSuccess:()=>{a.invalidateQueries({queryKey:["products"]})}})}function j(){let a=(0,d.useQueryClient)();return(0,c.useMutation)({mutationFn:({id:a,data:b})=>e.apiClient.updateProduct(a,b),onSuccess:(b,{id:c})=>{a.invalidateQueries({queryKey:["products"]}),a.invalidateQueries({queryKey:["product",c]})}})}function k(){let a=(0,d.useQueryClient)();return(0,c.useMutation)({mutationFn:a=>e.apiClient.deleteProduct(a),onSuccess:()=>{a.invalidateQueries({queryKey:["products"]})}})}a.s(["useCreateProduct",()=>i,"useDeleteProduct",()=>k,"useProduct",()=>g,"useProductBySlug",()=>h,"useProducts",()=>f,"useUpdateProduct",()=>j])},23998,a=>{"use strict";var b=a.i(57490),c=a.i(33551),d=a.i(8824),e=a.i(5841),f=a.i(65986),g=a.i(18276),h=a.i(31862),i=a.i(78607),j=a.i(62987),k=a.i(86636),l=a.i(13497),m=a.i(98908),n=a.i(59280),o=a.i(75134),p=a.i(41346),q=a.i(45954),r=a.i(56840),s=a.i(99543);let t=f.z.object({title:f.z.string().min(2,"Введите название товара"),slug:f.z.string().min(2,"Введите slug"),sku:f.z.string().min(2,"Введите SKU"),description:f.z.string().optional(),price:f.z.coerce.number().min(0,"Цена должна быть положительной"),currency:f.z.string().default("RUB"),status:f.z.enum(["DRAFT","PUBLISHED","ARCHIVED"]),stock:f.z.coerce.number().min(0).default(0),brandId:f.z.string().min(1,"Выберите бренд"),categoryId:f.z.string().min(1,"Выберите категорию")});function u(){let a=(0,c.useRouter)(),f=(0,p.useCreateProduct)(),{data:u}=(0,q.useBrands)(),{data:v}=(0,r.useCategories)(),w=(0,d.useForm)({resolver:(0,e.zodResolver)(t),defaultValues:{title:"",slug:"",sku:"",description:"",price:0,currency:"RUB",status:"DRAFT",stock:0,brandId:"",categoryId:""}}),x=async b=>{try{await f.mutateAsync({...b,attributes:{}}),a.push("/admin/manage-products")}catch{alert("Ошибка при создании товара")}};return(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)(j.Button,{variant:"ghost",asChild:!0,className:"mb-4",children:(0,b.jsxs)(i.default,{href:"/admin/manage-products",children:[(0,b.jsx)(g.ArrowLeft,{className:"mr-2 h-4 w-4"}),"Назад к списку"]})}),(0,b.jsx)("h1",{className:"text-2xl font-bold",children:"Новый товар"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Создание нового товара в каталоге"})]}),(0,b.jsxs)(m.Card,{children:[(0,b.jsx)(m.CardHeader,{children:(0,b.jsx)(m.CardTitle,{children:"Информация о товаре"})}),(0,b.jsx)(m.CardContent,{children:(0,b.jsx)(o.Form,{...w,children:(0,b.jsxs)("form",{onSubmit:w.handleSubmit(x),className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsx)(o.FormField,{control:w.control,name:"title",render:({field:a})=>(0,b.jsxs)(o.FormItem,{children:[(0,b.jsx)(o.FormLabel,{children:"Название *"}),(0,b.jsx)(o.FormControl,{children:(0,b.jsx)(k.Input,{placeholder:"Название товара",...a,onChange:a=>{var b;return b=a.target.value,void(w.setValue("title",b),!w.getValues("slug")&&w.setValue("slug",(0,s.slugify)(b)))}})}),(0,b.jsx)(o.FormMessage,{})]})}),(0,b.jsx)(o.FormField,{control:w.control,name:"slug",render:({field:a})=>(0,b.jsxs)(o.FormItem,{children:[(0,b.jsx)(o.FormLabel,{children:"Slug *"}),(0,b.jsx)(o.FormControl,{children:(0,b.jsx)(k.Input,{placeholder:"slug-tovara",...a})}),(0,b.jsx)(o.FormMessage,{})]})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,b.jsx)(o.FormField,{control:w.control,name:"sku",render:({field:a})=>(0,b.jsxs)(o.FormItem,{children:[(0,b.jsx)(o.FormLabel,{children:"SKU *"}),(0,b.jsx)(o.FormControl,{children:(0,b.jsx)(k.Input,{placeholder:"ABC-123",...a})}),(0,b.jsx)(o.FormMessage,{})]})}),(0,b.jsx)(o.FormField,{control:w.control,name:"price",render:({field:a})=>(0,b.jsxs)(o.FormItem,{children:[(0,b.jsx)(o.FormLabel,{children:"Цена *"}),(0,b.jsx)(o.FormControl,{children:(0,b.jsx)(k.Input,{type:"number",step:"0.01",...a})}),(0,b.jsx)(o.FormMessage,{})]})}),(0,b.jsx)(o.FormField,{control:w.control,name:"stock",render:({field:a})=>(0,b.jsxs)(o.FormItem,{children:[(0,b.jsx)(o.FormLabel,{children:"Остаток"}),(0,b.jsx)(o.FormControl,{children:(0,b.jsx)(k.Input,{type:"number",...a})}),(0,b.jsx)(o.FormMessage,{})]})})]}),(0,b.jsx)(o.FormField,{control:w.control,name:"description",render:({field:a})=>(0,b.jsxs)(o.FormItem,{children:[(0,b.jsx)(o.FormLabel,{children:"Описание"}),(0,b.jsx)(o.FormControl,{children:(0,b.jsx)(l.Textarea,{placeholder:"Описание товара...",className:"min-h-[100px]",...a})}),(0,b.jsx)(o.FormMessage,{})]})}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,b.jsx)(o.FormField,{control:w.control,name:"brandId",render:({field:a})=>(0,b.jsxs)(o.FormItem,{children:[(0,b.jsx)(o.FormLabel,{children:"Бренд *"}),(0,b.jsxs)(n.Select,{onValueChange:a.onChange,defaultValue:a.value,children:[(0,b.jsx)(o.FormControl,{children:(0,b.jsx)(n.SelectTrigger,{children:(0,b.jsx)(n.SelectValue,{placeholder:"Выберите бренд"})})}),(0,b.jsx)(n.SelectContent,{children:u?.map(a=>(0,b.jsx)(n.SelectItem,{value:a.id,children:a.name},a.id))})]}),(0,b.jsx)(o.FormMessage,{})]})}),(0,b.jsx)(o.FormField,{control:w.control,name:"categoryId",render:({field:a})=>(0,b.jsxs)(o.FormItem,{children:[(0,b.jsx)(o.FormLabel,{children:"Категория *"}),(0,b.jsxs)(n.Select,{onValueChange:a.onChange,defaultValue:a.value,children:[(0,b.jsx)(o.FormControl,{children:(0,b.jsx)(n.SelectTrigger,{children:(0,b.jsx)(n.SelectValue,{placeholder:"Выберите категорию"})})}),(0,b.jsx)(n.SelectContent,{children:v?.map(a=>(0,b.jsx)(n.SelectItem,{value:a.id,children:a.name},a.id))})]}),(0,b.jsx)(o.FormMessage,{})]})}),(0,b.jsx)(o.FormField,{control:w.control,name:"status",render:({field:a})=>(0,b.jsxs)(o.FormItem,{children:[(0,b.jsx)(o.FormLabel,{children:"Статус"}),(0,b.jsxs)(n.Select,{onValueChange:a.onChange,defaultValue:a.value,children:[(0,b.jsx)(o.FormControl,{children:(0,b.jsx)(n.SelectTrigger,{children:(0,b.jsx)(n.SelectValue,{})})}),(0,b.jsxs)(n.SelectContent,{children:[(0,b.jsx)(n.SelectItem,{value:"DRAFT",children:"Черновик"}),(0,b.jsx)(n.SelectItem,{value:"PUBLISHED",children:"Опубликован"}),(0,b.jsx)(n.SelectItem,{value:"ARCHIVED",children:"В архиве"})]})]}),(0,b.jsx)(o.FormMessage,{})]})})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,b.jsx)(j.Button,{variant:"outline",type:"button",asChild:!0,children:(0,b.jsx)(i.default,{href:"/admin/manage-products",children:"Отмена"})}),(0,b.jsxs)(j.Button,{type:"submit",disabled:f.isPending,children:[f.isPending&&(0,b.jsx)(h.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Создать товар"]})]})]})})})]})]})}a.s(["default",()=>u])}];

//# sourceMappingURL=front_e14824db._.js.map