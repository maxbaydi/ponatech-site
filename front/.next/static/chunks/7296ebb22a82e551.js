(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,8913,e=>{"use strict";var r=e.i(86900),s=e.i(91926);e.i(34650);var a=e.i(69834),t=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let l=(0,a.createSlot)(`Primitive.${t}`),i=s.forwardRef((e,s)=>{let{asChild:a,...i}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,r.jsx)(a?l:t,{...i,ref:s})});return i.displayName=`Primitive.${t}`,{...e,[t]:i}},{}),l=s.forwardRef((e,s)=>(0,r.jsx)(t.label,{...e,ref:s,onMouseDown:r=>{r.target.closest("button, input, select, textarea")||(e.onMouseDown?.(r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));l.displayName="Label";var i=e.i(94404),n=e.i(62002);let o=(0,i.cva)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=s.forwardRef(({className:e,...s},a)=>(0,r.jsx)(l,{ref:a,className:(0,n.cn)(o(),e),...s}));d.displayName=l.displayName,e.s(["Label",()=>d],8913)},75567,e=>{"use strict";var r=e.i(91926);function s(e){let s=r.useRef({value:e,previous:e});return r.useMemo(()=>(s.current.value!==e&&(s.current.previous=s.current.value,s.current.value=e),s.current.previous),[e])}e.s(["usePrevious",()=>s])},24876,e=>{"use strict";let r=(0,e.i(20727).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>r],24876)},54766,e=>{"use strict";let r=(0,e.i(20727).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>r],54766)},41816,e=>{"use strict";var r=e.i(86900),s=e.i(91926),a=e.i(62002);let t=s.forwardRef(({className:e,...s},t)=>(0,r.jsx)("textarea",{className:(0,a.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),ref:t,...s}));t.displayName="Textarea",e.s(["Textarea",()=>t])},762,e=>{"use strict";var r=e.i(86900),s=e.i(29428),a=e.i(7368),t=e.i(54655),l=e.i(80700),i=e.i(54766),n=e.i(24876),o=e.i(44226),d=e.i(51813),c=e.i(11954),u=e.i(41816),m=e.i(50236),x=e.i(91896),h=e.i(62359),p=e.i(37304),j=e.i(62002);let g=l.z.object({name:l.z.string().min(2,"Введите название категории"),slug:l.z.string().min(2,"Введите slug"),description:l.z.string().optional(),parentId:l.z.string().optional()});function f(){let e=(0,s.useRouter)(),l=(0,p.useCreateCategory)(),{data:f}=(0,p.useCategories)(),v=(0,a.useForm)({resolver:(0,t.zodResolver)(g),defaultValues:{name:"",slug:"",description:"",parentId:""}}),b=async r=>{try{await l.mutateAsync({...r,parentId:r.parentId||void 0}),e.push("/admin/manage-categories")}catch{alert("Ошибка при создании категории")}};return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)(d.Button,{variant:"ghost",asChild:!0,className:"mb-4",children:(0,r.jsxs)(o.default,{href:"/admin/manage-categories",children:[(0,r.jsx)(i.ArrowLeft,{className:"mr-2 h-4 w-4"}),"Назад к списку"]})}),(0,r.jsx)("h1",{className:"text-2xl font-bold",children:"Новая категория"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Создание новой категории товаров"})]}),(0,r.jsxs)(m.Card,{children:[(0,r.jsx)(m.CardHeader,{children:(0,r.jsx)(m.CardTitle,{children:"Информация о категории"})}),(0,r.jsx)(m.CardContent,{children:(0,r.jsx)(h.Form,{...v,children:(0,r.jsxs)("form",{onSubmit:v.handleSubmit(b),className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsx)(h.FormField,{control:v.control,name:"name",render:({field:e})=>(0,r.jsxs)(h.FormItem,{children:[(0,r.jsx)(h.FormLabel,{children:"Название *"}),(0,r.jsx)(h.FormControl,{children:(0,r.jsx)(c.Input,{placeholder:"Название категории",...e,onChange:e=>{var r;return r=e.target.value,void(v.setValue("name",r),!v.getValues("slug")&&v.setValue("slug",(0,j.slugify)(r)))}})}),(0,r.jsx)(h.FormMessage,{})]})}),(0,r.jsx)(h.FormField,{control:v.control,name:"slug",render:({field:e})=>(0,r.jsxs)(h.FormItem,{children:[(0,r.jsx)(h.FormLabel,{children:"Slug *"}),(0,r.jsx)(h.FormControl,{children:(0,r.jsx)(c.Input,{placeholder:"category-slug",...e})}),(0,r.jsx)(h.FormMessage,{})]})})]}),(0,r.jsx)(h.FormField,{control:v.control,name:"parentId",render:({field:e})=>(0,r.jsxs)(h.FormItem,{children:[(0,r.jsx)(h.FormLabel,{children:"Родительская категория"}),(0,r.jsxs)(x.Select,{onValueChange:e.onChange,defaultValue:e.value,children:[(0,r.jsx)(h.FormControl,{children:(0,r.jsx)(x.SelectTrigger,{children:(0,r.jsx)(x.SelectValue,{placeholder:"Выберите родительскую категорию (опционально)"})})}),(0,r.jsxs)(x.SelectContent,{children:[(0,r.jsx)(x.SelectItem,{value:"",children:"Нет (корневая категория)"}),f?.map(e=>(0,r.jsx)(x.SelectItem,{value:e.id,children:e.name},e.id))]})]}),(0,r.jsx)(h.FormMessage,{})]})}),(0,r.jsx)(h.FormField,{control:v.control,name:"description",render:({field:e})=>(0,r.jsxs)(h.FormItem,{children:[(0,r.jsx)(h.FormLabel,{children:"Описание"}),(0,r.jsx)(h.FormControl,{children:(0,r.jsx)(u.Textarea,{placeholder:"Описание категории...",className:"min-h-[100px]",...e})}),(0,r.jsx)(h.FormMessage,{})]})}),(0,r.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,r.jsx)(d.Button,{variant:"outline",type:"button",asChild:!0,children:(0,r.jsx)(o.default,{href:"/admin/manage-categories",children:"Отмена"})}),(0,r.jsxs)(d.Button,{type:"submit",disabled:l.isPending,children:[l.isPending&&(0,r.jsx)(n.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Создать категорию"]})]})]})})})]})]})}e.s(["default",()=>f])}]);