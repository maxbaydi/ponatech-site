(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,83267,e=>{"use strict";var t=e.i(86900),r=e.i(94404),a=e.i(62002);let s=(0,r.cva)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-white shadow hover:bg-primary-dark",secondary:"border-transparent bg-secondary text-white hover:bg-secondary-dark",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-success text-white",warning:"border-transparent bg-warning text-white",info:"border-transparent bg-info text-white"}},defaultVariants:{variant:"default"}});function l({className:e,variant:r,...l}){return(0,t.jsx)("div",{className:(0,a.cn)(s({variant:r}),e),...l})}e.s(["Badge",()=>l])},80647,e=>{"use strict";let t=(0,e.i(20727).default)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);e.s(["MoreHorizontal",()=>t],80647)},13844,e=>{"use strict";var t=e.i(83914),r=e.i(73937),a=e.i(55365),s=e.i(26345);function l(e){return(0,t.useQuery)({queryKey:["products",e],queryFn:()=>s.apiClient.getProducts(e)})}function i(e){return(0,t.useQuery)({queryKey:["product",e],queryFn:()=>s.apiClient.getProduct(e),enabled:!!e})}function n(e){return(0,t.useQuery)({queryKey:["product","slug",e],queryFn:()=>s.apiClient.getProductBySlug(e),enabled:!!e})}function d(){let e=(0,a.useQueryClient)();return(0,r.useMutation)({mutationFn:e=>s.apiClient.createProduct(e),onSuccess:()=>{e.invalidateQueries({queryKey:["products"]})}})}function c(){let e=(0,a.useQueryClient)();return(0,r.useMutation)({mutationFn:({id:e,data:t})=>s.apiClient.updateProduct(e,t),onSuccess:(t,{id:r})=>{e.invalidateQueries({queryKey:["products"]}),e.invalidateQueries({queryKey:["product",r]})}})}function o(){let e=(0,a.useQueryClient)();return(0,r.useMutation)({mutationFn:e=>s.apiClient.deleteProduct(e),onSuccess:()=>{e.invalidateQueries({queryKey:["products"]})}})}e.s(["useCreateProduct",()=>d,"useDeleteProduct",()=>o,"useProduct",()=>i,"useProductBySlug",()=>n,"useProducts",()=>l,"useUpdateProduct",()=>c])},57433,e=>{"use strict";let t=(0,e.i(20727).default)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>t],57433)},38925,e=>{"use strict";var t=e.i(86900),r=e.i(91926),a=e.i(62002);let s=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{className:"relative w-full overflow-auto",children:(0,t.jsx)("table",{ref:s,className:(0,a.cn)("w-full caption-bottom text-sm",e),...r})}));s.displayName="Table";let l=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)("thead",{ref:s,className:(0,a.cn)("[&_tr]:border-b",e),...r}));l.displayName="TableHeader";let i=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)("tbody",{ref:s,className:(0,a.cn)("[&_tr:last-child]:border-0",e),...r}));i.displayName="TableBody",r.forwardRef(({className:e,...r},s)=>(0,t.jsx)("tfoot",{ref:s,className:(0,a.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...r})).displayName="TableFooter";let n=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)("tr",{ref:s,className:(0,a.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...r}));n.displayName="TableRow";let d=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)("th",{ref:s,className:(0,a.cn)("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...r}));d.displayName="TableHead";let c=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)("td",{ref:s,className:(0,a.cn)("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...r}));c.displayName="TableCell",r.forwardRef(({className:e,...r},s)=>(0,t.jsx)("caption",{ref:s,className:(0,a.cn)("mt-4 text-sm text-muted-foreground",e),...r})).displayName="TableCaption",e.s(["Table",()=>s,"TableBody",()=>i,"TableCell",()=>c,"TableHead",()=>d,"TableHeader",()=>l,"TableRow",()=>n])},96938,78488,13275,e=>{"use strict";var t=e.i(20727);let r=(0,t.default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>r],96938);let a=(0,t.default)("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);e.s(["Pencil",()=>a],78488);let s=(0,t.default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>s],13275)},27936,e=>{"use strict";var t=e.i(86900),r=e.i(91926),a=e.i(44226),s=e.i(96938),l=e.i(86626),i=e.i(80647),n=e.i(78488),d=e.i(13275),c=e.i(57433),o=e.i(51813),u=e.i(11954),x=e.i(83267),h=e.i(38925),m=e.i(20071),f=e.i(50236),b=e.i(98916),p=e.i(13844),y=e.i(62002);let j={PUBLISHED:{label:"Опубликован",variant:"default"},DRAFT:{label:"Черновик",variant:"secondary"},ARCHIVED:{label:"В архиве",variant:"outline"}};function g(){let[e,g]=(0,r.useState)(""),[v,w]=(0,r.useState)(""),{data:T,isLoading:N}=(0,p.useProducts)({search:v||void 0}),C=(0,p.useDeleteProduct)();(0,r.useEffect)(()=>{let t=setTimeout(()=>{w(e.trim())},500);return()=>{clearTimeout(t)}},[e]);let k=async e=>{confirm("Вы уверены, что хотите удалить этот товар?")&&await C.mutateAsync(e)};return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"Товары"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Управление каталогом товаров"})]}),(0,t.jsx)(o.Button,{asChild:!0,children:(0,t.jsxs)(a.default,{href:"/admin/manage-products/new",children:[(0,t.jsx)(s.Plus,{className:"mr-2 h-4 w-4"}),"Добавить товар"]})})]}),(0,t.jsxs)(f.Card,{children:[(0,t.jsx)(f.CardHeader,{className:"pb-4",children:(0,t.jsx)("div",{className:"flex items-center gap-4",children:(0,t.jsxs)("div",{className:"relative flex-1 max-w-sm",children:[(0,t.jsx)(l.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(u.Input,{placeholder:"Поиск товаров...",value:e,onChange:e=>g(e.target.value),className:"pl-10"})]})})}),(0,t.jsx)(f.CardContent,{className:"p-0",children:N?(0,t.jsx)("div",{className:"p-4 space-y-4",children:Array.from({length:5}).map((e,r)=>(0,t.jsx)(b.Skeleton,{className:"h-12 w-full"},r))}):T&&T.length>0?(0,t.jsxs)(h.Table,{children:[(0,t.jsx)(h.TableHeader,{children:(0,t.jsxs)(h.TableRow,{children:[(0,t.jsx)(h.TableHead,{children:"Товар"}),(0,t.jsx)(h.TableHead,{children:"SKU"}),(0,t.jsx)(h.TableHead,{children:"Бренд"}),(0,t.jsx)(h.TableHead,{children:"Цена"}),(0,t.jsx)(h.TableHead,{children:"Статус"}),(0,t.jsx)(h.TableHead,{className:"w-[70px]"})]})}),(0,t.jsx)(h.TableBody,{children:T.map(e=>{let r=j[e.status];return(0,t.jsxs)(h.TableRow,{children:[(0,t.jsx)(h.TableCell,{children:(0,t.jsx)("div",{className:"font-medium",children:e.title})}),(0,t.jsx)(h.TableCell,{className:"text-muted-foreground",children:e.sku}),(0,t.jsx)(h.TableCell,{children:e.brand?.name||"-"}),(0,t.jsx)(h.TableCell,{children:(0,y.formatPrice)(e.price,e.currency)}),(0,t.jsx)(h.TableCell,{children:(0,t.jsx)(x.Badge,{variant:r.variant,children:r.label})}),(0,t.jsx)(h.TableCell,{children:(0,t.jsxs)(m.DropdownMenu,{children:[(0,t.jsx)(m.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(o.Button,{variant:"ghost",size:"icon",children:(0,t.jsx)(i.MoreHorizontal,{className:"h-4 w-4"})})}),(0,t.jsxs)(m.DropdownMenuContent,{align:"end",children:[(0,t.jsx)(m.DropdownMenuItem,{asChild:!0,children:(0,t.jsxs)(a.default,{href:`/catalog/${e.slug}`,children:[(0,t.jsx)(c.Eye,{className:"mr-2 h-4 w-4"}),"Просмотр"]})}),(0,t.jsx)(m.DropdownMenuItem,{asChild:!0,children:(0,t.jsxs)(a.default,{href:`/admin/manage-products/${e.id}/edit`,children:[(0,t.jsx)(n.Pencil,{className:"mr-2 h-4 w-4"}),"Редактировать"]})}),(0,t.jsxs)(m.DropdownMenuItem,{onClick:()=>k(e.id),className:"text-destructive",children:[(0,t.jsx)(d.Trash2,{className:"mr-2 h-4 w-4"}),"Удалить"]})]})]})})]},e.id)})})]}):(0,t.jsx)("div",{className:"p-8 text-center text-muted-foreground",children:(0,t.jsx)("p",{children:"Товары не найдены"})})})]})]})}e.s(["default",()=>g])}]);