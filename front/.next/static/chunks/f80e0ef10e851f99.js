(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,93805,e=>{"use strict";var r=e.i(83914),t=e.i(73937),s=e.i(55365),n=e.i(26345);function i(){return(0,r.useQuery)({queryKey:["brands"],queryFn:()=>n.apiClient.getBrands()})}function l(e){return(0,r.useQuery)({queryKey:["brand",e],queryFn:()=>n.apiClient.getBrand(e),enabled:!!e})}function a(){let e=(0,s.useQueryClient)();return(0,t.useMutation)({mutationFn:e=>n.apiClient.createBrand(e),onSuccess:()=>{e.invalidateQueries({queryKey:["brands"]})}})}function o(){let e=(0,s.useQueryClient)();return(0,t.useMutation)({mutationFn:({id:e,data:r})=>n.apiClient.updateBrand(e,r),onSuccess:(r,{id:t})=>{e.invalidateQueries({queryKey:["brands"]}),e.invalidateQueries({queryKey:["brand",t]})}})}function u(){let e=(0,s.useQueryClient)();return(0,t.useMutation)({mutationFn:e=>n.apiClient.deleteBrand(e),onSuccess:()=>{e.invalidateQueries({queryKey:["brands"]})}})}e.s(["useBrand",()=>l,"useBrands",()=>i,"useCreateBrand",()=>a,"useDeleteBrand",()=>u,"useUpdateBrand",()=>o])},13844,e=>{"use strict";var r=e.i(83914),t=e.i(73937),s=e.i(55365),n=e.i(26345);function i(e){return(0,r.useQuery)({queryKey:["products",e],queryFn:()=>n.apiClient.getProducts(e)})}function l(e){return(0,r.useQuery)({queryKey:["product",e],queryFn:()=>n.apiClient.getProduct(e),enabled:!!e})}function a(e){return(0,r.useQuery)({queryKey:["product","slug",e],queryFn:()=>n.apiClient.getProductBySlug(e),enabled:!!e})}function o(){let e=(0,s.useQueryClient)();return(0,t.useMutation)({mutationFn:e=>n.apiClient.createProduct(e),onSuccess:()=>{e.invalidateQueries({queryKey:["products"]})}})}function u(){let e=(0,s.useQueryClient)();return(0,t.useMutation)({mutationFn:({id:e,data:r})=>n.apiClient.updateProduct(e,r),onSuccess:(r,{id:t})=>{e.invalidateQueries({queryKey:["products"]}),e.invalidateQueries({queryKey:["product",t]})}})}function d(){let e=(0,s.useQueryClient)();return(0,t.useMutation)({mutationFn:e=>n.apiClient.deleteProduct(e),onSuccess:()=>{e.invalidateQueries({queryKey:["products"]})}})}e.s(["useCreateProduct",()=>o,"useDeleteProduct",()=>d,"useProduct",()=>l,"useProductBySlug",()=>a,"useProducts",()=>i,"useUpdateProduct",()=>u])},8913,e=>{"use strict";var r=e.i(86900),t=e.i(91926);e.i(34650);var s=e.i(69834),n=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,n)=>{let i=(0,s.createSlot)(`Primitive.${n}`),l=t.forwardRef((e,t)=>{let{asChild:s,...l}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,r.jsx)(s?i:n,{...l,ref:t})});return l.displayName=`Primitive.${n}`,{...e,[n]:l}},{}),i=t.forwardRef((e,t)=>(0,r.jsx)(n.label,{...e,ref:t,onMouseDown:r=>{r.target.closest("button, input, select, textarea")||(e.onMouseDown?.(r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));i.displayName="Label";var l=e.i(94404),a=e.i(62002);let o=(0,l.cva)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),u=t.forwardRef(({className:e,...t},s)=>(0,r.jsx)(i,{ref:s,className:(0,a.cn)(o(),e),...t}));u.displayName=i.displayName,e.s(["Label",()=>u],8913)},75567,e=>{"use strict";var r=e.i(91926);function t(e){let t=r.useRef({value:e,previous:e});return r.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}e.s(["usePrevious",()=>t])},24876,e=>{"use strict";let r=(0,e.i(20727).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>r],24876)},54766,e=>{"use strict";let r=(0,e.i(20727).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>r],54766)},41816,e=>{"use strict";var r=e.i(86900),t=e.i(91926),s=e.i(62002);let n=t.forwardRef(({className:e,...t},n)=>(0,r.jsx)("textarea",{className:(0,s.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));n.displayName="Textarea",e.s(["Textarea",()=>n])},654,e=>{"use strict";var r=e.i(86900),t=e.i(29428),s=e.i(7368),n=e.i(54655),i=e.i(80700),l=e.i(54766),a=e.i(24876),o=e.i(44226),u=e.i(51813),d=e.i(11954),c=e.i(41816),m=e.i(50236),x=e.i(91896),h=e.i(62359),j=e.i(13844),p=e.i(93805),g=e.i(37304),y=e.i(62002);let F=i.z.object({title:i.z.string().min(2,"Введите название товара"),slug:i.z.string().min(2,"Введите slug"),sku:i.z.string().min(2,"Введите SKU"),description:i.z.string().optional(),price:i.z.coerce.number().min(0,"Цена должна быть положительной"),currency:i.z.string().default("RUB"),status:i.z.enum(["DRAFT","PUBLISHED","ARCHIVED"]),stock:i.z.coerce.number().min(0).default(0),brandId:i.z.string().min(1,"Выберите бренд"),categoryId:i.z.string().min(1,"Выберите категорию")});function f(){let e=(0,t.useRouter)(),i=(0,j.useCreateProduct)(),{data:f}=(0,p.useBrands)(),{data:v}=(0,g.useCategories)(),b=(0,s.useForm)({resolver:(0,n.zodResolver)(F),defaultValues:{title:"",slug:"",sku:"",description:"",price:0,currency:"RUB",status:"DRAFT",stock:0,brandId:"",categoryId:""}}),C=async r=>{try{await i.mutateAsync({...r,attributes:{}}),e.push("/admin/manage-products")}catch{alert("Ошибка при создании товара")}};return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)(u.Button,{variant:"ghost",asChild:!0,className:"mb-4",children:(0,r.jsxs)(o.default,{href:"/admin/manage-products",children:[(0,r.jsx)(l.ArrowLeft,{className:"mr-2 h-4 w-4"}),"Назад к списку"]})}),(0,r.jsx)("h1",{className:"text-2xl font-bold",children:"Новый товар"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Создание нового товара в каталоге"})]}),(0,r.jsxs)(m.Card,{children:[(0,r.jsx)(m.CardHeader,{children:(0,r.jsx)(m.CardTitle,{children:"Информация о товаре"})}),(0,r.jsx)(m.CardContent,{children:(0,r.jsx)(h.Form,{...b,children:(0,r.jsxs)("form",{onSubmit:b.handleSubmit(C),className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsx)(h.FormField,{control:b.control,name:"title",render:({field:e})=>(0,r.jsxs)(h.FormItem,{children:[(0,r.jsx)(h.FormLabel,{children:"Название *"}),(0,r.jsx)(h.FormControl,{children:(0,r.jsx)(d.Input,{placeholder:"Название товара",...e,onChange:e=>{var r;return r=e.target.value,void(b.setValue("title",r),!b.getValues("slug")&&b.setValue("slug",(0,y.slugify)(r)))}})}),(0,r.jsx)(h.FormMessage,{})]})}),(0,r.jsx)(h.FormField,{control:b.control,name:"slug",render:({field:e})=>(0,r.jsxs)(h.FormItem,{children:[(0,r.jsx)(h.FormLabel,{children:"Slug *"}),(0,r.jsx)(h.FormControl,{children:(0,r.jsx)(d.Input,{placeholder:"slug-tovara",...e})}),(0,r.jsx)(h.FormMessage,{})]})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,r.jsx)(h.FormField,{control:b.control,name:"sku",render:({field:e})=>(0,r.jsxs)(h.FormItem,{children:[(0,r.jsx)(h.FormLabel,{children:"SKU *"}),(0,r.jsx)(h.FormControl,{children:(0,r.jsx)(d.Input,{placeholder:"ABC-123",...e})}),(0,r.jsx)(h.FormMessage,{})]})}),(0,r.jsx)(h.FormField,{control:b.control,name:"price",render:({field:e})=>(0,r.jsxs)(h.FormItem,{children:[(0,r.jsx)(h.FormLabel,{children:"Цена *"}),(0,r.jsx)(h.FormControl,{children:(0,r.jsx)(d.Input,{type:"number",step:"0.01",...e})}),(0,r.jsx)(h.FormMessage,{})]})}),(0,r.jsx)(h.FormField,{control:b.control,name:"stock",render:({field:e})=>(0,r.jsxs)(h.FormItem,{children:[(0,r.jsx)(h.FormLabel,{children:"Остаток"}),(0,r.jsx)(h.FormControl,{children:(0,r.jsx)(d.Input,{type:"number",...e})}),(0,r.jsx)(h.FormMessage,{})]})})]}),(0,r.jsx)(h.FormField,{control:b.control,name:"description",render:({field:e})=>(0,r.jsxs)(h.FormItem,{children:[(0,r.jsx)(h.FormLabel,{children:"Описание"}),(0,r.jsx)(h.FormControl,{children:(0,r.jsx)(c.Textarea,{placeholder:"Описание товара...",className:"min-h-[100px]",...e})}),(0,r.jsx)(h.FormMessage,{})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,r.jsx)(h.FormField,{control:b.control,name:"brandId",render:({field:e})=>(0,r.jsxs)(h.FormItem,{children:[(0,r.jsx)(h.FormLabel,{children:"Бренд *"}),(0,r.jsxs)(x.Select,{onValueChange:e.onChange,defaultValue:e.value,children:[(0,r.jsx)(h.FormControl,{children:(0,r.jsx)(x.SelectTrigger,{children:(0,r.jsx)(x.SelectValue,{placeholder:"Выберите бренд"})})}),(0,r.jsx)(x.SelectContent,{children:f?.map(e=>(0,r.jsx)(x.SelectItem,{value:e.id,children:e.name},e.id))})]}),(0,r.jsx)(h.FormMessage,{})]})}),(0,r.jsx)(h.FormField,{control:b.control,name:"categoryId",render:({field:e})=>(0,r.jsxs)(h.FormItem,{children:[(0,r.jsx)(h.FormLabel,{children:"Категория *"}),(0,r.jsxs)(x.Select,{onValueChange:e.onChange,defaultValue:e.value,children:[(0,r.jsx)(h.FormControl,{children:(0,r.jsx)(x.SelectTrigger,{children:(0,r.jsx)(x.SelectValue,{placeholder:"Выберите категорию"})})}),(0,r.jsx)(x.SelectContent,{children:v?.map(e=>(0,r.jsx)(x.SelectItem,{value:e.id,children:e.name},e.id))})]}),(0,r.jsx)(h.FormMessage,{})]})}),(0,r.jsx)(h.FormField,{control:b.control,name:"status",render:({field:e})=>(0,r.jsxs)(h.FormItem,{children:[(0,r.jsx)(h.FormLabel,{children:"Статус"}),(0,r.jsxs)(x.Select,{onValueChange:e.onChange,defaultValue:e.value,children:[(0,r.jsx)(h.FormControl,{children:(0,r.jsx)(x.SelectTrigger,{children:(0,r.jsx)(x.SelectValue,{})})}),(0,r.jsxs)(x.SelectContent,{children:[(0,r.jsx)(x.SelectItem,{value:"DRAFT",children:"Черновик"}),(0,r.jsx)(x.SelectItem,{value:"PUBLISHED",children:"Опубликован"}),(0,r.jsx)(x.SelectItem,{value:"ARCHIVED",children:"В архиве"})]})]}),(0,r.jsx)(h.FormMessage,{})]})})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,r.jsx)(u.Button,{variant:"outline",type:"button",asChild:!0,children:(0,r.jsx)(o.default,{href:"/admin/manage-products",children:"Отмена"})}),(0,r.jsxs)(u.Button,{type:"submit",disabled:i.isPending,children:[i.isPending&&(0,r.jsx)(a.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Создать товар"]})]})]})})})]})]})}e.s(["default",()=>f])}]);